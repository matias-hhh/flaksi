!function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){var r={Dispatcher:n(1),Store:n(6),resource:n(9)};window.flaksi=r},function(t,e,n){var r=n(2),i=n(5),o=n(6),s=function(){return this instanceof s?(this._debug=!1,this._callbacks=[],this._dispatchQueue=[],this._isDispatching=!1,this._asyncCallbacks=[],this._defers=[],this._promises=[],void 0):new s};s.prototype={register:function(t){return this._callbacks.push(t),this._asyncCallbacks.push(!1),this._callbacks.length-1},registerAsync:function(t){return this._callbacks.push(t),this._asyncCallbacks.push(!0),this._callbacks.length-1},dispatch:function(t){this._dispatchQueue.push(t),this._debug&&console.log(t.type+": In queue"),this._dispatchNext()},_createDone:function(t){return function(e){e?t.reject(e):t.resolve()}},_dispatchNext:function(){if(this._dispatchQueue.length&&!this._isDispatching){this._isDispatching=!0;var t=this._dispatchQueue.shift();this._debug&&console.log(t.type+": Dispatching"),this._callbacks.forEach(function(t,e){this._defers[e]=r.defer(),this._promises[e]=this._defers[e].promise}.bind(this)),this._callbacks.forEach(function(e,n){this._debug&&console.log(t.type+": starting callback"+(n+1)),this._asyncCallbacks[n]?e(t,this._createDone(this._defers[n])):r.fcall(e,t).then(this._defers[n].resolve)["catch"](this._defers[n].reject)}.bind(this)),r.all(this._promises).done(function(){this._debug&&console.log(t.type+": Finished"),this._defers=[],this._promises=[],this._isDispatching=!1,this._dispatchNext()}.bind(this),function(t){throw this._debug&&console.error(t),t}.bind(this))}},waitFor:function(t,e){if(!this._isDispatching)throw new Error("waitFor: Cannot be used outside dispatching");this._debug&&console.log("Started waitFor");var n=[];t.forEach(function(t){if(t instanceof o){if("number"!=typeof t.dispatchIndex)throw new Error("waitFor: dispatchIndex must be a number");var e=t.dispatchIndex;n.push(this._promises[e])}else{if("number"!=typeof t)throw new Error('waitFor: Input "'+t+'" is not a Store instance or a number');n.push(this._promises[t])}}.bind(this)),r.all(n).done(e,function(t){throw this._debug&&console.error("waitFor: Could not execute callback, prerequisite callbacks did not finish"),new Error("waitFor: Could not execute callback, prerequisite callbacks did notfinish")}.bind(this))},newActionCreator:function(){return new i(this.dispatch.bind(this))}},t.exports=s},function(t,e,n){(function(e,n){/*!
	 *
	 * Copyright 2009-2012 Kris Kowal under the terms of the MIT
	 * license found at http://github.com/kriskowal/q/raw/master/LICENSE
	 *
	 * With parts by Tyler Close
	 * Copyright 2007-2009 Tyler Close under the terms of the MIT X license found
	 * at http://www.opensource.org/licenses/mit-license.html
	 * Forked at ref_send.js version: 2009-05-11
	 *
	 * With parts by Mark Miller
	 * Copyright (C) 2011 Google Inc.
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 *
	 */
!function(e){"use strict";if("function"==typeof bootstrap)bootstrap("promise",e);else{t.exports=e()}}(function(){"use strict";function t(t){return function(){return W.apply(t,arguments)}}function r(t){return t===Object(t)}function i(t){return"[object StopIteration]"===it(t)||t instanceof G}function o(t,e){if(B&&e.stack&&"object"==typeof t&&null!==t&&t.stack&&-1===t.stack.indexOf(ot)){for(var n=[],r=e;r;r=r.source)r.stack&&n.unshift(r.stack);n.unshift(t.stack);var i=n.join("\n"+ot+"\n");t.stack=s(i)}}function s(t){for(var e=t.split("\n"),n=[],r=0;r<e.length;++r){var i=e[r];a(i)||u(i)||!i||n.push(i)}return n.join("\n")}function u(t){return-1!==t.indexOf("(module.js:")||-1!==t.indexOf("(node.js:")}function c(t){var e=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);if(e)return[e[1],Number(e[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(t);if(n)return[n[1],Number(n[2])];var r=/.*@(.+):(\d+)$/.exec(t);return r?[r[1],Number(r[2])]:void 0}function a(t){var e=c(t);if(!e)return!1;var n=e[0],r=e[1];return n===$&&r>=z&&ft>=r}function f(){if(B)try{throw new Error}catch(t){var e=t.stack.split("\n"),n=e[0].indexOf("@")>0?e[1]:e[2],r=c(n);if(!r)return;return $=r[0],r[1]}}function p(t,e,n){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(e+" is deprecated, use "+n+" instead.",new Error("").stack),t.apply(t,arguments)}}function l(t){return t instanceof y?t:w(t)?R(t):A(t)}function h(){function t(t){e=t,o.source=t,Y(n,function(e,n){l.nextTick(function(){t.promiseDispatch.apply(t,n)})},void 0),n=void 0,r=void 0}var e,n=[],r=[],i=et(h.prototype),o=et(y.prototype);if(o.promiseDispatch=function(t,i,o){var s=X(arguments);n?(n.push(s),"when"===i&&o[1]&&r.push(o[1])):l.nextTick(function(){e.promiseDispatch.apply(e,s)})},o.valueOf=function(){if(n)return o;var t=g(e);return _(t)&&(e=t),t},o.inspect=function(){return e?e.inspect():{state:"pending"}},l.longStackSupport&&B)try{throw new Error}catch(s){o.stack=s.stack.substring(s.stack.indexOf("\n")+1)}return i.promise=o,i.resolve=function(n){e||t(l(n))},i.fulfill=function(n){e||t(A(n))},i.reject=function(n){e||t(L(n))},i.notify=function(t){e||Y(r,function(e,n){l.nextTick(function(){n(t)})},void 0)},i}function d(t){if("function"!=typeof t)throw new TypeError("resolver must be a function.");var e=h();try{t(e.resolve,e.reject,e.notify)}catch(n){e.reject(n)}return e.promise}function v(t){return d(function(e,n){for(var r=0,i=t.length;i>r;r++)l(t[r]).then(e,n)})}function y(t,e,n){void 0===e&&(e=function(t){return L(new Error("Promise does not support operation: "+t))}),void 0===n&&(n=function(){return{state:"unknown"}});var r=et(y.prototype);if(r.promiseDispatch=function(n,i,o){var s;try{s=t[i]?t[i].apply(r,o):e.call(r,i,o)}catch(u){s=L(u)}n&&n(s)},r.inspect=n,n){var i=n();"rejected"===i.state&&(r.exception=i.reason),r.valueOf=function(){var t=n();return"pending"===t.state||"rejected"===t.state?r:t.value}}return r}function m(t,e,n,r){return l(t).then(e,n,r)}function g(t){if(_(t)){var e=t.inspect();if("fulfilled"===e.state)return e.value}return t}function _(t){return t instanceof y}function w(t){return r(t)&&"function"==typeof t.then}function b(t){return _(t)&&"pending"===t.inspect().state}function k(t){return!_(t)||"fulfilled"===t.inspect().state}function j(t){return _(t)&&"rejected"===t.inspect().state}function x(){st.length=0,ut.length=0,at||(at=!0)}function T(t,n){at&&("object"==typeof e&&"function"==typeof e.emit&&l.nextTick.runAfter(function(){-1!==Z(ut,t)&&(e.emit("unhandledRejection",n,t),ct.push(t))}),ut.push(t),n&&"undefined"!=typeof n.stack?st.push(n.stack):st.push("(no stack) "+n))}function E(t){if(at){var n=Z(ut,t);-1!==n&&("object"==typeof e&&"function"==typeof e.emit&&l.nextTick.runAfter(function(){var r=Z(ct,t);-1!==r&&(e.emit("rejectionHandled",st[n],t),ct.splice(r,1))}),ut.splice(n,1),st.splice(n,1))}}function L(t){var e=y({when:function(e){return e&&E(this),e?e(t):this}},function(){return this},function(){return{state:"rejected",reason:t}});return T(e,t),e}function A(t){return y({when:function(){return t},get:function(e){return t[e]},set:function(e,n){t[e]=n},"delete":function(e){delete t[e]},post:function(e,n){return null===e||void 0===e?t.apply(void 0,n):t[e].apply(t,n)},apply:function(e,n){return t.apply(e,n)},keys:function(){return rt(t)}},void 0,function(){return{state:"fulfilled",value:t}})}function R(t){var e=h();return l.nextTick(function(){try{t.then(e.resolve,e.reject,e.notify)}catch(n){e.reject(n)}}),e.promise}function I(t){return y({isDef:function(){}},function(e,n){return F(t,e,n)},function(){return l(t).inspect()})}function D(t,e,n){return l(t).spread(e,n)}function S(t){return function(){function e(t,e){var s;if("undefined"==typeof StopIteration){try{s=n[t](e)}catch(u){return L(u)}return s.done?l(s.value):m(s.value,r,o)}try{s=n[t](e)}catch(u){return i(u)?l(u.value):L(u)}return m(s,r,o)}var n=t.apply(this,arguments),r=e.bind(e,"next"),o=e.bind(e,"throw");return r()}}function C(t){l.done(l.async(t)())}function O(t){throw new G(t)}function N(t){return function(){return D([this,P(arguments)],function(e,n){return t.apply(e,n)})}}function F(t,e,n){return l(t).dispatch(e,n)}function P(t){return m(t,function(t){var e=0,n=h();return Y(t,function(r,i,o){var s;_(i)&&"fulfilled"===(s=i.inspect()).state?t[o]=s.value:(++e,m(i,function(r){t[o]=r,0===--e&&n.resolve(t)},n.reject,function(t){n.notify({index:o,value:t})}))},void 0),0===e&&n.resolve(t),n.promise})}function M(t){if(0===t.length)return l.resolve();var e=l.defer(),n=0;return Y(t,function(r,i,o){function s(t){e.resolve(t)}function u(){n--,0===n&&e.reject(new Error("Can't get fulfillment value from any promise, all promises were rejected."))}function c(t){e.notify({index:o,value:t})}var a=t[o];n++,m(a,s,u,c)},void 0),e.promise}function Q(t){return m(t,function(t){return t=tt(t,l),m(P(tt(t,function(t){return m(t,J,J)})),function(){return t})})}function U(t){return l(t).allSettled()}function q(t,e){return l(t).then(void 0,void 0,e)}function H(t,e){return l(t).nodeify(e)}var B=!1;try{throw new Error}catch(V){B=!!V.stack}var $,G,z=f(),J=function(){},K=function(){function t(){for(var t,e;i.next;)i=i.next,t=i.task,i.task=void 0,e=i.domain,e&&(i.domain=void 0,e.enter()),r(t,e);for(;a.length;)t=a.pop(),r(t);s=!1}function r(e,n){try{e()}catch(r){if(c)throw n&&n.exit(),setTimeout(t,0),n&&n.enter(),r;setTimeout(function(){throw r},0)}n&&n.exit()}var i={task:void 0,next:null},o=i,s=!1,u=void 0,c=!1,a=[];if(K=function(t){o=o.next={task:t,domain:c&&e.domain,next:null},s||(s=!0,u())},"object"==typeof e&&"[object process]"===e.toString()&&e.nextTick)c=!0,u=function(){e.nextTick(t)};else if("function"==typeof n)u="undefined"!=typeof window?n.bind(window,t):function(){n(t)};else if("undefined"!=typeof MessageChannel){var f=new MessageChannel;f.port1.onmessage=function(){u=p,f.port1.onmessage=t,t()};var p=function(){f.port2.postMessage(0)};u=function(){setTimeout(t,0),p()}}else u=function(){setTimeout(t,0)};return K.runAfter=function(t){a.push(t),s||(s=!0,u())},K}(),W=Function.call,X=t(Array.prototype.slice),Y=t(Array.prototype.reduce||function(t,e){var n=0,r=this.length;if(1===arguments.length)for(;;){if(n in this){e=this[n++];break}if(++n>=r)throw new TypeError}for(;r>n;n++)n in this&&(e=t(e,this[n],n));return e}),Z=t(Array.prototype.indexOf||function(t){for(var e=0;e<this.length;e++)if(this[e]===t)return e;return-1}),tt=t(Array.prototype.map||function(t,e){var n=this,r=[];return Y(n,function(i,o,s){r.push(t.call(e,o,s,n))},void 0),r}),et=Object.create||function(t){function e(){}return e.prototype=t,new e},nt=t(Object.prototype.hasOwnProperty),rt=Object.keys||function(t){var e=[];for(var n in t)nt(t,n)&&e.push(n);return e},it=t(Object.prototype.toString);G="undefined"!=typeof ReturnValue?ReturnValue:function(t){this.value=t};var ot="From previous event:";l.resolve=l,l.nextTick=K,l.longStackSupport=!1,"object"==typeof e&&e&&e.env&&e.env.Q_DEBUG&&(l.longStackSupport=!0),l.defer=h,h.prototype.makeNodeResolver=function(){var t=this;return function(e,n){e?t.reject(e):arguments.length>2?t.resolve(X(arguments,1)):t.resolve(n)}},l.Promise=d,l.promise=d,d.race=v,d.all=P,d.reject=L,d.resolve=l,l.passByCopy=function(t){return t},y.prototype.passByCopy=function(){return this},l.join=function(t,e){return l(t).join(e)},y.prototype.join=function(t){return l([this,t]).spread(function(t,e){if(t===e)return t;throw new Error("Can't join: not the same: "+t+" "+e)})},l.race=v,y.prototype.race=function(){return this.then(l.race)},l.makePromise=y,y.prototype.toString=function(){return"[object Promise]"},y.prototype.then=function(t,e,n){function r(e){try{return"function"==typeof t?t(e):e}catch(n){return L(n)}}function i(t){if("function"==typeof e){o(t,u);try{return e(t)}catch(n){return L(n)}}return L(t)}function s(t){return"function"==typeof n?n(t):t}var u=this,c=h(),a=!1;return l.nextTick(function(){u.promiseDispatch(function(t){a||(a=!0,c.resolve(r(t)))},"when",[function(t){a||(a=!0,c.resolve(i(t)))}])}),u.promiseDispatch(void 0,"when",[void 0,function(t){var e,n=!1;try{e=s(t)}catch(r){if(n=!0,!l.onerror)throw r;l.onerror(r)}n||c.notify(e)}]),c.promise},l.tap=function(t,e){return l(t).tap(e)},y.prototype.tap=function(t){return t=l(t),this.then(function(e){return t.fcall(e).thenResolve(e)})},l.when=m,y.prototype.thenResolve=function(t){return this.then(function(){return t})},l.thenResolve=function(t,e){return l(t).thenResolve(e)},y.prototype.thenReject=function(t){return this.then(function(){throw t})},l.thenReject=function(t,e){return l(t).thenReject(e)},l.nearer=g,l.isPromise=_,l.isPromiseAlike=w,l.isPending=b,y.prototype.isPending=function(){return"pending"===this.inspect().state},l.isFulfilled=k,y.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},l.isRejected=j,y.prototype.isRejected=function(){return"rejected"===this.inspect().state};var st=[],ut=[],ct=[],at=!0;l.resetUnhandledRejections=x,l.getUnhandledReasons=function(){return st.slice()},l.stopUnhandledRejectionTracking=function(){x(),at=!1},x(),l.reject=L,l.fulfill=A,l.master=I,l.spread=D,y.prototype.spread=function(t,e){return this.all().then(function(e){return t.apply(void 0,e)},e)},l.async=S,l.spawn=C,l["return"]=O,l.promised=N,l.dispatch=F,y.prototype.dispatch=function(t,e){var n=this,r=h();return l.nextTick(function(){n.promiseDispatch(r.resolve,t,e)}),r.promise},l.get=function(t,e){return l(t).dispatch("get",[e])},y.prototype.get=function(t){return this.dispatch("get",[t])},l.set=function(t,e,n){return l(t).dispatch("set",[e,n])},y.prototype.set=function(t,e){return this.dispatch("set",[t,e])},l.del=l["delete"]=function(t,e){return l(t).dispatch("delete",[e])},y.prototype.del=y.prototype["delete"]=function(t){return this.dispatch("delete",[t])},l.mapply=l.post=function(t,e,n){return l(t).dispatch("post",[e,n])},y.prototype.mapply=y.prototype.post=function(t,e){return this.dispatch("post",[t,e])},l.send=l.mcall=l.invoke=function(t,e){return l(t).dispatch("post",[e,X(arguments,2)])},y.prototype.send=y.prototype.mcall=y.prototype.invoke=function(t){return this.dispatch("post",[t,X(arguments,1)])},l.fapply=function(t,e){return l(t).dispatch("apply",[void 0,e])},y.prototype.fapply=function(t){return this.dispatch("apply",[void 0,t])},l["try"]=l.fcall=function(t){return l(t).dispatch("apply",[void 0,X(arguments,1)])},y.prototype.fcall=function(){return this.dispatch("apply",[void 0,X(arguments)])},l.fbind=function(t){var e=l(t),n=X(arguments,1);return function(){return e.dispatch("apply",[this,n.concat(X(arguments))])}},y.prototype.fbind=function(){var t=this,e=X(arguments);return function(){return t.dispatch("apply",[this,e.concat(X(arguments))])}},l.keys=function(t){return l(t).dispatch("keys",[])},y.prototype.keys=function(){return this.dispatch("keys",[])},l.all=P,y.prototype.all=function(){return P(this)},l.any=M,y.prototype.any=function(){return M(this)},l.allResolved=p(Q,"allResolved","allSettled"),y.prototype.allResolved=function(){return Q(this)},l.allSettled=U,y.prototype.allSettled=function(){return this.then(function(t){return P(tt(t,function(t){function e(){return t.inspect()}return t=l(t),t.then(e,e)}))})},l.fail=l["catch"]=function(t,e){return l(t).then(void 0,e)},y.prototype.fail=y.prototype["catch"]=function(t){return this.then(void 0,t)},l.progress=q,y.prototype.progress=function(t){return this.then(void 0,void 0,t)},l.fin=l["finally"]=function(t,e){return l(t)["finally"](e)},y.prototype.fin=y.prototype["finally"]=function(t){return t=l(t),this.then(function(e){return t.fcall().then(function(){return e})},function(e){return t.fcall().then(function(){throw e})})},l.done=function(t,e,n,r){return l(t).done(e,n,r)},y.prototype.done=function(t,n,r){var i=function(t){l.nextTick(function(){if(o(t,s),!l.onerror)throw t;l.onerror(t)})},s=t||n||r?this.then(t,n,r):this;"object"==typeof e&&e&&e.domain&&(i=e.domain.bind(i)),s.then(void 0,i)},l.timeout=function(t,e,n){return l(t).timeout(e,n)},y.prototype.timeout=function(t,e){var n=h(),r=setTimeout(function(){e&&"string"!=typeof e||(e=new Error(e||"Timed out after "+t+" ms"),e.code="ETIMEDOUT"),n.reject(e)},t);return this.then(function(t){clearTimeout(r),n.resolve(t)},function(t){clearTimeout(r),n.reject(t)},n.notify),n.promise},l.delay=function(t,e){return void 0===e&&(e=t,t=void 0),l(t).delay(e)},y.prototype.delay=function(t){return this.then(function(e){var n=h();return setTimeout(function(){n.resolve(e)},t),n.promise})},l.nfapply=function(t,e){return l(t).nfapply(e)},y.prototype.nfapply=function(t){var e=h(),n=X(t);return n.push(e.makeNodeResolver()),this.fapply(n).fail(e.reject),e.promise},l.nfcall=function(t){var e=X(arguments,1);return l(t).nfapply(e)},y.prototype.nfcall=function(){var t=X(arguments),e=h();return t.push(e.makeNodeResolver()),this.fapply(t).fail(e.reject),e.promise},l.nfbind=l.denodeify=function(t){var e=X(arguments,1);return function(){var n=e.concat(X(arguments)),r=h();return n.push(r.makeNodeResolver()),l(t).fapply(n).fail(r.reject),r.promise}},y.prototype.nfbind=y.prototype.denodeify=function(){var t=X(arguments);return t.unshift(this),l.denodeify.apply(void 0,t)},l.nbind=function(t,e){var n=X(arguments,2);return function(){function r(){return t.apply(e,arguments)}var i=n.concat(X(arguments)),o=h();return i.push(o.makeNodeResolver()),l(r).fapply(i).fail(o.reject),o.promise}},y.prototype.nbind=function(){var t=X(arguments,0);return t.unshift(this),l.nbind.apply(void 0,t)},l.nmapply=l.npost=function(t,e,n){return l(t).npost(e,n)},y.prototype.nmapply=y.prototype.npost=function(t,e){var n=X(e||[]),r=h();return n.push(r.makeNodeResolver()),this.dispatch("post",[t,n]).fail(r.reject),r.promise},l.nsend=l.nmcall=l.ninvoke=function(t,e){var n=X(arguments,2),r=h();return n.push(r.makeNodeResolver()),l(t).dispatch("post",[e,n]).fail(r.reject),r.promise},y.prototype.nsend=y.prototype.nmcall=y.prototype.ninvoke=function(t){var e=X(arguments,1),n=h();return e.push(n.makeNodeResolver()),this.dispatch("post",[t,e]).fail(n.reject),n.promise},l.nodeify=H,y.prototype.nodeify=function(t){return t?void this.then(function(e){l.nextTick(function(){t(null,e)})},function(e){l.nextTick(function(){t(e)})}):this},l.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var ft=f();return l})}).call(e,n(3),n(4).setImmediate)},function(t,e,n){function r(){f=!1,u.length?a=u.concat(a):p=-1,a.length&&i()}function i(){if(!f){var t=setTimeout(r);f=!0;for(var e=a.length;e;){for(u=a,a=[];++p<e;)u[p].run();p=-1,e=a.length}u=null,f=!1,clearTimeout(t)}}function o(t,e){this.fun=t,this.array=e}function s(){}var u,c=t.exports={},a=[],f=!1,p=-1;c.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];a.push(new o(t,e)),1!==a.length||f||setTimeout(i,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=s,c.addListener=s,c.once=s,c.off=s,c.removeListener=s,c.removeAllListeners=s,c.emit=s,c.binding=function(t){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(t){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},function(t,e,n){(function(t,r){function i(t,e){this._id=t,this._clearFn=e}var o=n(3).nextTick,s=Function.prototype.apply,u=Array.prototype.slice,c={},a=0;e.setTimeout=function(){return new i(s.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new i(s.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},e.setImmediate="function"==typeof t?t:function(t){var n=a++,r=arguments.length<2?!1:u.call(arguments,1);return c[n]=!0,o(function(){c[n]&&(r?t.apply(null,r):t.call(null),e.clearImmediate(n))}),n},e.clearImmediate="function"==typeof r?r:function(t){delete c[t]}}).call(e,n(4).setImmediate,n(4).clearImmediate)},function(t,e,n){var r=function(t){this.dispatch=t};r.prototype={createServerAction:function(t,e){this.serverApiHandler?this.serverApiHandler({type:t,data:e}).then(function(e){this.dispatch({type:t,data:e})}.bind(this))["catch"](function(t){console.error(t)}):console.error("No serverApiHandler defined!")},createViewAction:function(t,e){this.dispatch({type:t,data:e})},registerServerApiHandler:function(t){this.serverApiHandler=t}},t.exports=r},function(t,e,n){var r=n(7).EventEmitter,i=n(8).mixin,o=function(){return this instanceof o?(this._data=null,void(this._backup=null)):new o};i(o.prototype,r.prototype,{constructor:o,get data(){return this._data},set data(t){this._backup=this._data,this._data=t},appendData:function(t){this._backup=this._data,this._data.push(t)},emitChange:function(){this.emit("change")},addChangeListener:function(t){this.on("change",t)},removeChangeListener:function(t){this.removeListener("change",t)}}),t.exports=o},function(t,e,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(t){return"function"==typeof t}function o(t){return"number"==typeof t}function s(t){return"object"==typeof t&&null!==t}function u(t){return void 0===t}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(t){if(!o(t)||0>t||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},r.prototype.emit=function(t){var e,n,r,o,c,a;if(this._events||(this._events={}),"error"===t&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[t],u(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(r=arguments.length,o=new Array(r-1),c=1;r>c;c++)o[c-1]=arguments[c];n.apply(this,o)}else if(s(n)){for(r=arguments.length,o=new Array(r-1),c=1;r>c;c++)o[c-1]=arguments[c];for(a=n.slice(),r=a.length,c=0;r>c;c++)a[c].apply(this,o)}return!0},r.prototype.addListener=function(t,e){var n;if(!i(e))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,i(e.listener)?e.listener:e),this._events[t]?s(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,s(this._events[t])&&!this._events[t].warned){var n;n=u(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[t].length>n&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())}return this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(t,e){function n(){this.removeListener(t,n),r||(r=!0,e.apply(this,arguments))}if(!i(e))throw TypeError("listener must be a function");var r=!1;return n.listener=e,this.on(t,n),this},r.prototype.removeListener=function(t,e){var n,r,o,u;if(!i(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],o=n.length,r=-1,n===e||i(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(s(n)){for(u=o;u-->0;)if(n[u]===e||n[u].listener&&n[u].listener===e){r=u;break}if(0>r)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},r.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],i(n))this.removeListener(t,n);else for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},r.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?i(this._events[t])?[this._events[t]]:this._events[t].slice():[]},r.listenerCount=function(t,e){var n;return n=t._events&&t._events[e]?i(t._events[e])?1:t._events[e].length:0}},function(t,e,n){var r=function(){for(var t=1;t<arguments.length;t++)for(var e in arguments[t])arguments[t].hasOwnProperty(e)&&(arguments[0][e]=arguments[t][e])};e.mixin=r},function(t,e,n){e.resource=function(t,e,n){var r=Q.defer();return"GET"===t?request.get(e).end(function(t,e){t?r.reject(t):r.resolve(e.body)}):"POST"===t?request.post(e).send(n).end(function(t,e){t?r.reject(t):r.resolve(e.body)}):"PUT"===t?request.put(e).send(n).end(function(t,e){t?r.reject(t):r.resolve(e.body)}):"DELETE"===t&&request["delete"](e).send(n).end(function(t,e){t?r.reject(t):r.resolve(e.body)}),r.promise}}]);